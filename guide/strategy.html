<!DOCTYPE html>

<html lang="en">

<head>
    <title>Request strategy &mdash; InstantSearch Core for Swift</title>

    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    <link href="#" rel="icon" type="image/x-icon">
    <meta content="InstantSearch Core for Swift is the toolbox to create advanced search experiences" name="description">
    <!-- Twitter card -->
    <meta content="summary_large_image" name="twitter:card">
    <meta content="@Algolia" name="twitter:site">
    <meta content="@Algolia" name="twitter:creator">
    <meta content="InstantSearch Core for Swift" name="twitter:title">
    <meta content="InstantSearch Core for Swift is the toolbox to create advanced search experiences" name="twitter:description">
    <meta content="Algolia Product image" name="twitter:image">
    <!-- / OpenGraph -->
    <meta content="https://community.algolia.com/instantsearch-core-swift/" property="og:url">
    <meta content="InstantSearch Core for Swift" property="og:title">
    <meta content="#" property="og:image">
    <meta content="article" property="og:type">
    <meta content="InstantSearch Core for Swift is the toolbox to create advanced search experiences" property="og:description">
    <meta content="Algolia Community" property="og:site_name">
    
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,500,600" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../css/site.css" />
    <link rel="stylesheet" type="text/css" href="../css/guide.css" />
</head>

<body class="index">

    <div class="ac-nav">
        <div class="ac-nav-container">
            <div class="ac-nav-brand">
                <a class="ac-logo" href="https://community.algolia.com/" title="Algolia Community">
                    <img alt="Algolia Community" class="ac-logo__lg" src="https://res.cloudinary.com/hilnmyskv/image/upload/logo-community-inline-dark.svg" width="150">
                    <img alt="Algolia Community" class="ac-logo__sm" src="https://res.cloudinary.com/hilnmyskv/image/upload/v1461180081/logo-community-sm.svg">
                </a>
                <span class="ac-nav-brand-breadcrumb"></span>
                <a class="ac-nav-brand-title" href="../index.html" title="Home">InstantSearch Core for Swift</a>
                <span class="ac-nav-brand-breadcrumb"></span>
                <a class="ac-nav-brand-title" href="#" title="Request strategy">Request strategy</a>
            </div>
            <div class="ac-nav-menu">
                <ul class="ac-nav-menu-list">
                    <li class="ac-nav-menu-list-item active">
                        <a href="../guide/index.html" title="Guide">Guide</a>
                    </li>
                    <li class="ac-nav-menu-list-item">
                        <a href="../reference/index.html" title="Reference">Reference</a>
                    </li>
                    <li class="ac-nav-menu-list-item">
                        <a href="../examples/index.html" title="Examples">Examples</a>
                    </li>
                    <li class="ac-nav-menu-list-icon">
                        <a class="ac-icon" href="https://github.com/algolia/instantsearch-core-swift" title="GitHub repository">
                            <span class="ac-icon ac-icon-github"></span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container">
        <nav class="sidebar">
            <ul>
                <li ><a href="../guide/index.html">Overview</a></li>
                <li ><a href="../guide/quick-start.html">Quick Start</a></li>
                <li ><a href="../guide/search.html">Search</a></li>
                <li ><a href="../guide/highlighting.html">Highlighting</a></li>
                <li class="currentPage"><a href="../guide/strategy.html">Request strategy</a></li>
                <li ><a href="../guide/miscellaneous.html">Miscellaneous</a></li>
            </ul>
        </nav>
        <nav class="sidebar-toggle" onclick="sidebarToggle()">&#x2630;</nav>

        <article class="main-content">
            <h1 id="request-strategy"><a class="heading-anchor" href="#request-strategy"><span></span></a>Request strategy</h1>
<h2 id="overview"><a class="heading-anchor" href="#overview"><span></span></a>Overview</h2>
<p>By default, a <code>Searcher</code> will launch a request every time you call <code>search(...)</code>. That&#x2019;s what you want, right?</p>
<p>Well, not always. When network conditions are bad, for example (high latency, poor bandwidth, packet loss&#x2026;), the network may not be able to cope with as-you-type search, which could lead to a poor user experience.</p>
<p>That&#x2019;s why the <code>Searcher</code> class accepts an optional <strong>strategy delegate</strong> that, when provided, will take care of deciding how to perform searches. This delegate can decide to drop requests, to throttle them, or even alter their metadata.</p>
<h2 id="adaptive-network"><a class="heading-anchor" href="#adaptive-network"><span></span></a>Adaptive network</h2>
<h3 id="rationale"><a class="heading-anchor" href="#rationale"><span></span></a>Rationale</h3>
<p>The library provides one request strategy implementation: <code>AdaptiveNetworkStrategy</code>. This strategy monitors the response time of every request, and based on the observed response times, switches between various modes: <strong>realtime</strong>, <strong>throttled</strong> and <strong>manual</strong>.</p>
<p>In <strong>realtime mode</strong>, which is the default, all requests are fired immediately. This is typically what you want in an as-you-type search context, and provides the optimal user experience when the network conditions are good.</p>
<p>As soon as the network starts to degrade, however, things get more complicated: not only may the requests take too long to complete, but if the bandwidth is not sufficient, the response time may even get slower and slower, as requests stack up inside the pipeline. To fight this effect, the <strong>throttled mode</strong> delays requests, dropping them along the way, to ensure a maximum throughput. Furthermore, the throttling delay is dynamically adjusted so that the search throughput more or less matches the current network&#x2019;s capabilities.</p>
<p>If the network is very bad, though, as-you-type search stops being the right option altogether. Instead of having users stare at a spinning wheel forever, it&#x2019;s better to disable as-you-type, and inform the users that they need to explicitly submit their searches. That&#x2019;s what the <strong>manual mode</strong> does: all non-final searches are dropped.</p>
<h3 id="usage"><a class="heading-anchor" href="#usage"><span></span></a>Usage</h3>
<p>Using the adaptive network strategy first requires monitoring response times using a <code>ResponseTimeStats</code>. Then, you create a new <code>AdaptiveNetworkStrategy</code> using those statistics, and assigning it to a <code>Searcher</code>:</p>
<pre><code class="hljs swift"><span class="hljs-keyword">let</span> searcher = <span class="hljs-comment">/* your searcher */</span>
<span class="hljs-keyword">let</span> stats = <span class="hljs-type">ResponseTimeStats</span>(searcher: searcher)
<span class="hljs-keyword">let</span> strategy = <span class="hljs-type">AdaptiveNetworkStrategy</span>(stats: stats)
searcher.strategy = strategy</code></pre>

<p><strong>Note:</strong> <em>As is customary for delegates, a <code>Searcher</code> does not retain its strategy. You must therefore ensure that its lifetime exceeds that of the searcher.</em></p>
<h2 id="writing-your-own-strategy"><a class="heading-anchor" href="#writing-your-own-strategy"><span></span></a>Writing your own strategy</h2>
<p>Implementing your own strategy is just a matter of implementing the <code>RequestStrategy</code> protocol, which contains only one method: <code>performSearch(from:userInfo:with:)</code>. The <code>Searcher</code> calls the strategy when the <code>search(...)</code> method is invoked, providing the search metadata via the <code>userInfo</code> parameter, and a block that the strategy should call when it decides to perform the search.</p>

        </article>
    </div>

    <section class='ac-footer'>
      <div class='ac-footer-container'>
        <p class='ac-footer-links'>
          Code licensed under
          <a class='ac-footer-link-item' href='../license.html'>MIT</a>
          <br>
          <a class='ac-footer-link-item' href='https://github.com/algolia/instantsearch-core-swift'>Github</a>
          <a class='ac-footer-link-item' href='https://github.com/algolia/instantsearch-core-swift/issues'>Issues</a>
          <a class='ac-footer-link-item' href='https://www.algolia.com/policies/privacy'>Privacy policy</a>
        </p>
      </div>
      <div class='ac-footer-container ac-footer-brand'>
        <p>This project is part of</p>
        <img class='ac-footer-brand-icon' src='https://res.cloudinary.com/hilnmyskv/image/upload/logo-community.svg'>
        <figure>
          <img class='ac-footer-brand-logo' src='https://res.cloudinary.com/hilnmyskv/image/upload/v1463417234/algolia-community_n6tixd.svg'>
          <figcaption>Algolia Community</figcaption>
        </figure>
        <a class='ac-footer-btn ac-footer-btn-cta' href='https://community.algolia.com/'>See More</a>
        <span class='ac-icon ac-icon-love-dark'></span>
      </div>
      <!-- FIXME: Version not available in Jazzy.
      <p class='ac-footer-version'>Latest version: </p>
      -->
      <div class='ac-footer-actions'>
        <div class='footer-container'>
          <p>Build unique search experiences with Algolia</p>
          <a class='ac-footer-btn ac-footer-btn-ghost-grey' href='https://www.algolia.com/why?utm_medium=social-owned&amp;utm_source=places%20website&amp;utm_campaign=homepage&amp;utm_term=why'>
            See Why
            <span class='ac-icon-triangle'></span>
          </a>
          <a class='ac-footer-btn ac-footer-btn-ghost-pink' href='https://www.algolia.com/users/sign_up?utm_medium=social-owned&amp;utm_source=places%20website&amp;utm_campaign=homepage&amp;utm_term=get_started'>Get Started For Free</a>
        </div>
      </div>
    </section>

</body>

<script src="../js/all.js"></script>
<script src="../js/responsiveNavigation.js"></script>
<script src="../js/jquery.min.js" defer></script>
<script src="..//js/sidebar.js" defer></script>

</html>
