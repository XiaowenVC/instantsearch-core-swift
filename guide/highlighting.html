<!DOCTYPE html>

<html lang="en">

<head>
    <title>Highlighting &mdash; InstantSearch Core for Swift</title>

    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    <link href="#" rel="icon" type="image/x-icon">
    <meta content="InstantSearch Core for Swift is the toolbox to create advanced search experiences" name="description">
    <!-- Twitter card -->
    <meta content="summary_large_image" name="twitter:card">
    <meta content="@Algolia" name="twitter:site">
    <meta content="@Algolia" name="twitter:creator">
    <meta content="InstantSearch Core for Swift" name="twitter:title">
    <meta content="InstantSearch Core for Swift is the toolbox to create advanced search experiences" name="twitter:description">
    <meta content="Algolia Product image" name="twitter:image">
    <!-- / OpenGraph -->
    <meta content="https://community.algolia.com/instantsearch-core-swift/" property="og:url">
    <meta content="InstantSearch Core for Swift" property="og:title">
    <meta content="#" property="og:image">
    <meta content="article" property="og:type">
    <meta content="InstantSearch Core for Swift is the toolbox to create advanced search experiences" property="og:description">
    <meta content="Algolia Community" property="og:site_name">
    
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,500,600" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../css/site.css" />
    <link rel="stylesheet" type="text/css" href="../css/guide.css" />
</head>

<body class="index">

    <div class="ac-nav">
        <div class="ac-nav-container">
            <div class="ac-nav-brand">
                <a class="ac-logo" href="https://community.algolia.com/" title="Algolia Community">
                    <img alt="Algolia Community" class="ac-logo__lg" src="https://res.cloudinary.com/hilnmyskv/image/upload/logo-community-inline-dark.svg" width="150">
                    <img alt="Algolia Community" class="ac-logo__sm" src="https://res.cloudinary.com/hilnmyskv/image/upload/v1461180081/logo-community-sm.svg">
                </a>
                <span class="ac-nav-brand-breadcrumb"></span>
                <a class="ac-nav-brand-title" href="../index.html" title="Home">InstantSearch Core for Swift</a>
                <span class="ac-nav-brand-breadcrumb"></span>
                <a class="ac-nav-brand-title" href="#" title="Highlighting">Highlighting</a>
            </div>
            <div class="ac-nav-menu">
                <ul class="ac-nav-menu-list">
                    <li class="ac-nav-menu-list-item active">
                        <a href="../guide/index.html" title="Guide">Guide</a>
                    </li>
                    <li class="ac-nav-menu-list-item">
                        <a href="../reference/index.html" title="Reference">Reference</a>
                    </li>
                    <li class="ac-nav-menu-list-item">
                        <a href="../examples/index.html" title="Examples">Examples</a>
                    </li>
                    <li class="ac-nav-menu-list-icon">
                        <a class="ac-icon" href="https://github.com/algolia/instantsearch-core-swift" title="GitHub repository">
                            <span class="ac-icon ac-icon-github"></span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container">
        <nav class="sidebar">
            <ul>
                <li ><a href="../guide/index.html">Overview</a></li>
                <li ><a href="../guide/quick-start.html">Quick Start</a></li>
                <li ><a href="../guide/search.html">Search</a></li>
                <li class="currentPage"><a href="../guide/highlighting.html">Highlighting</a></li>
                <li ><a href="../guide/strategy.html">Request strategy</a></li>
                <li ><a href="../guide/miscellaneous.html">Miscellaneous</a></li>
            </ul>
        </nav>
        <nav class="sidebar-toggle" onclick="sidebarToggle()">&#x2630;</nav>

        <article class="main-content">
            <h1 id="highlighting"><a class="heading-anchor" href="#highlighting"><span></span></a>Highlighting</h1>
<p>The <code>Highlighter</code> class is in charge of parsing highlight result values (as returned by the Search API in the <code>_highlightResults</code> attribute of every hit) and render them into a rich text string (an <code>NSAttributedString</code> instance).</p>
<h2 id="configuration"><a class="heading-anchor" href="#configuration"><span></span></a>Configuration</h2>
<h3 id="styles"><a class="heading-anchor" href="#styles"><span></span></a>Styles</h3>
<p>When you instantiate a highlighter, you specify a set of <strong>text attributes</strong> that will be applied to highlighted portions. For example, the following code will give you truly ugly red-on-yellow highlights:</p>
<pre><code class="hljs swift"><span class="hljs-keyword">let</span> highlighter = <span class="hljs-type">Highlighter</span>(highlightAttrs: [
    <span class="hljs-type">NSForegroundColorAttributeName</span>: <span class="hljs-type">UIColor</span>.red,
    <span class="hljs-type">NSBackgroundColorAttributeName</span>: <span class="hljs-type">UIColor</span>.yellow,
]</code></pre>

<h3 id="tags"><a class="heading-anchor" href="#tags"><span></span></a>Tags</h3>
<p>By default, the highlighter is set to recognized <code>&lt;em&gt;</code> tags, which are the default tags used by the Search API to mark up highlights. However, you can easily override that to a custom value.</p>
<p><strong>Note:</strong> <em>In that case, make sure that it matches the values for <code>highlightPreTag</code> and <code>highlightPostTag</code> in your search query (or your index&#x2019;s default)!</em></p>
<pre><code class="hljs swift">highlighter.preTag = <span class="hljs-string">&quot;&lt;mark&gt;&quot;</span>
highlighter.postTag = <span class="hljs-string">&quot;&lt;/mark&gt;&quot;</span></code></pre>

<h2 id="rendering"><a class="heading-anchor" href="#rendering"><span></span></a>Rendering</h2>
<p>Once the highlighter is configured, rendering highlights is just a matter of calling <code>render(text:)</code>. The real trick is to retrieve the highlighted value from the JSON&#x2026; Fortunately, the <code>SearchResults</code> class makes it easy:</p>
<pre><code class="hljs swift"><span class="hljs-keyword">let</span> searchResults: <span class="hljs-type">SearchResults</span> = ... <span class="hljs-comment">// whatever was received by the result handler</span>
<span class="hljs-keyword">let</span> index: <span class="hljs-type">Int</span> = ... <span class="hljs-comment">// index of the hit you want to retrieve</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> highlightResult = searchResults.highlightResult(at: index, path: <span class="hljs-string">&quot;attribute_name&quot;</span>) {
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> highlightValue = highlightResult.value {
        <span class="hljs-keyword">let</span> highlightedString = highlighter.render(text: highlightValue)
    }
}</code></pre>

<h2 id="inverse-highlighting"><a class="heading-anchor" href="#inverse-highlighting"><span></span></a>Inverse highlighting</h2>
<p>In most cases, you want to highlight parts of the text that matched the search query, to show users why the results are relevant to their search. There may be cases, however, where <strong>inverse highlighting</strong> is more adapted.</p>
<p>Let&#x2019;s consider <strong>query suggestions</strong>: as the user types, you are suggesting queries that contain the text already entered. In that case, highlighting the matched text does not bring any useful information, as it is the same for all suggestions. What is much more relevant is to highlight <em>the remaining parts</em>, i.e. the additional text supplied by each suggestion.</p>
<p>For example, when searching for &#x201C;star&#x201D;, instead of displaying:</p>
<ul>
<li><strong>star</strong> wars</li>
<li><strong>star</strong> trek</li>
</ul>
<p>&#x2026; you could display:</p>
<ul>
<li>star <strong>wars</strong></li>
<li>star <strong>trek</strong></li>
</ul>
<p>This is the goal of the <code>inverseHighlights(in:)</code> function. Just supply a string with regular highlights, and it will convert highlighted parts into non-highlighted parts and vice versa.</p>
<pre><code class="hljs swift"><span class="hljs-keyword">let</span> highlighter = <span class="hljs-comment">/* your highlighter */</span>
<span class="hljs-built_in">print</span>(highlighter.inverseHighlights(<span class="hljs-keyword">in</span>: <span class="hljs-string">&quot;&lt;em&gt;star&lt;/em&gt; wars&quot;</span>))
<span class="hljs-comment">// ... will print `star&lt;em&gt; wars&lt;/em&gt;`</span></code></pre>
        </article>
    </div>

    <section class='ac-footer'>
      <div class='ac-footer-container'>
        <p class='ac-footer-links'>
          Code licensed under
          <a class='ac-footer-link-item' href='../license.html'>MIT</a>
          <br>
          <a class='ac-footer-link-item' href='https://github.com/algolia/instantsearch-core-swift'>Github</a>
          <a class='ac-footer-link-item' href='https://github.com/algolia/instantsearch-core-swift/issues'>Issues</a>
          <a class='ac-footer-link-item' href='https://www.algolia.com/policies/privacy'>Privacy policy</a>
        </p>
      </div>
      <div class='ac-footer-container ac-footer-brand'>
        <p>This project is part of</p>
        <img class='ac-footer-brand-icon' src='https://res.cloudinary.com/hilnmyskv/image/upload/logo-community.svg'>
        <figure>
          <img class='ac-footer-brand-logo' src='https://res.cloudinary.com/hilnmyskv/image/upload/v1463417234/algolia-community_n6tixd.svg'>
          <figcaption>Algolia Community</figcaption>
        </figure>
        <a class='ac-footer-btn ac-footer-btn-cta' href='https://community.algolia.com/'>See More</a>
        <span class='ac-icon ac-icon-love-dark'></span>
      </div>
      <!-- FIXME: Version not available in Jazzy.
      <p class='ac-footer-version'>Latest version: </p>
      -->
      <div class='ac-footer-actions'>
        <div class='footer-container'>
          <p>Build unique search experiences with Algolia</p>
          <a class='ac-footer-btn ac-footer-btn-ghost-grey' href='https://www.algolia.com/why?utm_medium=social-owned&amp;utm_source=places%20website&amp;utm_campaign=homepage&amp;utm_term=why'>
            See Why
            <span class='ac-icon-triangle'></span>
          </a>
          <a class='ac-footer-btn ac-footer-btn-ghost-pink' href='https://www.algolia.com/users/sign_up?utm_medium=social-owned&amp;utm_source=places%20website&amp;utm_campaign=homepage&amp;utm_term=get_started'>Get Started For Free</a>
        </div>
      </div>
    </section>

</body>

<script src="../js/all.js"></script>
<script src="../js/responsiveNavigation.js"></script>
<script src="../js/jquery.min.js" defer></script>
<script src="..//js/sidebar.js" defer></script>

</html>
